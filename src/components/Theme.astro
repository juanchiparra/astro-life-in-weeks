---
const { theme = "dark" } = Astro.props;
const themes = [
    "dark",
    "light",
    "dracula",
    "atom-dark",
    "gruvbox-dark",
    "gruvbox-light",
    "tokyo-night",
];
---

<div style="display: flex; justify-content: flex-end; margin: 1rem;">
    <label for="theme-select">Choose a style </label>
    <select id="theme-select" style="margin-left: 0.5rem;">
        {
            themes.map((t) => (
                <option value={t} selected={t === theme}>
                    {t}
                </option>
            ))
        }
    </select>
</div>

<script>
    const select = document.getElementById(
        "theme-select"
    ) as HTMLSelectElement | null;
    function setTheme(theme: string) {
        document.body.className = "";
        document.body.classList.add(`theme-${theme}`);
    }
    if (select && !document.body.classList.contains(`theme-${select.value}`)) {
        setTheme(select.value);
    }
    select?.addEventListener("change", (e) => {
        const target = e.target as HTMLSelectElement | null;
        if (target) {
            setTheme(target.value);
        }
    });
</script>
